/*!
 *  jsMap v4.1.0
 *  Copyright (C) 2018-2019, ZhaoGang
 *  Released under the MIT license.
 */
!function(d,g){"function"===typeof define&&define.amd?define(["jsmap"],g):"undefined"!==typeof module&&"object"===typeof exports?module.exports=g():d.jsMap=g()}("undefined"!==typeof window?window:this,function(){function d(a,c){return[].slice.call("object"===typeof a?a.length?a:[a]:(c||document).querySelectorAll(a))}function g(a,c){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){var b=e.status;(200<=b&&300>b||304===b)&&c(JSON.parse(e.responseText.trim()))}};e.open("GET",a);e.send(null)}function J(a){for(var c in t){var e=t[c];if("object"!==f.type(e))void 0===a[c]&&(a[c]=e);else for(var b in e)a[c]?void 0===a[c][b]&&(a[c][b]=e[b]):a[c]=e}return a}var E=!!(navigator.userAgent.toLowerCase().match(/(ios|iphone|ipod|ipad|android)/)&&"ontouchend"in document),r={},u,f={getCSS:function(a,c){return window.getComputedStyle(a,null).getPropertyValue(c)},setCSS:function(a,c){d(a).forEach(function(a){for(var b in c)a.style[b]=c[b]})},setAttr:function(a,c){d(a).forEach(function(a){for(var b in c)a.setAttribute(b,c[b])})},type:function(a){return{}.toString.call(a).replace(/(\[object |\])/g,"").toLowerCase()},isEmptyObject:function(a){return 0===Object.keys(a).length}};Object.getOwnPropertyDescriptor(Element.prototype,"classList")||HTMLElement&&Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList")&&Object.defineProperty(Element.prototype,"classList",Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList"));var t={taiwanJSON:!1,nanhaizhudaoJSON:!1,name:"china",width:900,stroke:{width:1,color:"#f3f3f3"},fill:{basicColor:"#3f99f9",hoverColor:"#0880ff",clickColor:"#006bde"},areaName:{show:!1,size:12,basicColor:"#333",clickColor:"#fff"},disabled:{color:"#bfbfbf",except:!1,name:[]},zoom:{disabled:!0,max:5,zoomRange:!0,wheelZoom:!0},marker:{disabled:!0,icon:"data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAjVBMVEVMaXEsLCwoKCgrKyssLCwsLCwsLCwgICAqKioqKiorKyspKSkrKysrKyssLCwrKysrKysrKyssLCwrKysqKiosLCwrKyssLCwqKiosLCz///9SUlKVlZW8vLw5OTnX19fx8fF6enpgYGBhYWFTU1NFRUXk5ORtbW3Kysqvr697e3tGRkaIiIg4ODiHh4fw9bOuAAAAGXRSTlMA7yDQv4DwEGAwoFDfsMBw4F9Az5Cvj39PrlPZPAAAAWxJREFUeNrt1tluwyAQBdCxTUzwEmfrMjhu9qXr/39eq0oVkAZfUF7ykPNqezR3QGC6u3Fy8ihEUgnx9Cwp3kSw5WES+3nFZ2ZTCpcKvkAEB1EJX1QpCjJkn6SkACX7JSq+f1clCZAz7iUIGDAwBA24ATaLrlu0boiIBtql/nVqw1uwG1jrPyu7wox6KDbalTYV9myk5Ddn46Qtr4EZRua1vXZ8mic1+bHxpR0b82QUVmChHWtrP5NX6i9wZIO8pmwctWPHRliEl5W2HDi6gJthzUZGfmO7haX5vmMOW4WaL1boXtgyDz/NPg76x/KNHSXBdTR22+07n6E+Y4Zq6tMwgM4DyciY+hUMDNCtxv1ySUCBGkBS1AA0AEsAyZy9MrrydlUUpEYTxCHAHoJKEAArQABIZvzPiGKoHGyh+D+tKUUqwACwDBxDUGqNIQMDQBddrggAgywJAINsCAB/LAUBYEdmdA3ZNHR3874BBc+FYRSdidoAAAAASUVORK5CYII\x3d",click:function(){}},selected:[],hide:[],multiple:!1,tip:!0,defaultInteractive:!0,hoverCallback:function(){},clickCallback:function(){}},y={version:"4.1.0",config:function(a,c,e){var b=J(e||{});if(c&&"object"===f.type(c))if("taiwan"!==b.name||b.taiwanJSON)if("nanhaizhudao"!==b.name||b.nanhaizhudaoJSON){e=c[b.name];var p="",q="",v=[],n;for(n in e){var g=e[n];v.push(n);p+='\r\n\t\t\t\t\t\x3cpath \r\n\t\t\t\t\t\td\x3d"'+g.svg+'" \r\n\t\t\t\t\t\tclass\x3d"jsmap-'+n+'" \r\n\t\t\t\t\t\tdata-name\x3d"'+g.name+'" \r\n\t\t\t\t\t\tdata-id\x3d"'+n+'" \r\n\t\t\t\t\t\tstyle\x3d"cursor:pointer;"\x3e\r\n\t\t\t\t\t\x3c/path\x3e\r\n\t\t\t\t';q+='\r\n\t\t\t\t\t\x3ctext \r\n\t\t\t\t\t\tx\x3d"'+g.textPosition[0]+'" \r\n\t\t\t\t\t\ty\x3d"'+g.textPosition[1]+'" \r\n\t\t\t\t\t\tclass\x3d"jsmap-'+n+'" \r\n\t\t\t\t\t\tdata-name\x3d"'+g.name+'" \r\n\t\t\t\t\t\tdata-id\x3d"'+n+'" \r\n\t\t\t\t\t\tstyle\x3d"cursor:pointer;"\x3e'+g.name+"\x3c/text\x3e\r\n\t\t\t\t"}p='\x3cdiv \r\n\t\t\t\tclass\x3d"jsmap-svg-container" \r\n\t\t\t\tstyle\x3d"\r\n\t\t\t\t\tposition:absolute;\r\n\t\t\t\t\ttop:0;\r\n\t\t\t\t\tleft:0;\r\n\t\t\t\t\tpadding:0;\r\n\t\t\t\t\tmargin:0;\r\n\t\t\t\t\ttransform-origin:center;\r\n\t\t\t\t\t-webkit-user-select:none;\r\n\t\t\t\t\t-moz-user-select:none;\r\n\t\t\t\t\t-ms-user-select:none;\r\n\t\t\t\t\tuser-select:none;\r\n\t\t\t\t\t-webkit-tap-highlight-color:transparent;"\r\n\t\t\t\t\x3e\r\n\t\t\t\t\x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 575 470"\x3e'+p+q+"\x3c/svg\x3e\r\n\t\t\t\x3c/div\x3e";d(a).forEach(function(a){a.__jsmap_csscache__={width:a.style.width,height:a.style.height,padding:a.style.padding,position:a.style.position};"static"===f.getCSS(a,"position")&&(a.style.position="relative");a.classList.add("jsmap-container");var e;String(b.width).match(/^([1-9][0-9]{0,1}|100)%$/)?(b.width="100%",e=parseFloat(f.getCSS(a,"width"))/1.8+"px"):(b.width=parseInt(b.width)+"px",e=parseInt(b.width)/1.8+"px");f.setCSS(a,{width:b.width,height:e,padding:0});a.innerHTML=p;a.__jsmap_jsondata__=c;a.__jsmap_options__=b;var h=d(".jsmap-svg-container",a)[0],l=d("svg",h)[0],g=d("path",l),q=d("text",l),n=d("path, text",l);b.defaultInteractive||(h.defaultInteractive=!0);f.setCSS(h,{width:b.width,height:e});f.setAttr(l,{width:"100%"===b.width?b.width:parseFloat(b.width),height:parseFloat(e)});f.setCSS(l,{position:"relative",overflow:"hidden",marginLeft:"china"===b.name?700<window.innerWidth?"-50px":"-30px":0});q.length&&d(q).forEach(function(b){b.getAttribute("data-id").match(/(shanghai|xianggang|aomen|nanhaizhudao|tianjin|beijing)/)||(b.style.pointerEvents="none")});Array.isArray(b.hide)&&b.hide.length&&b.hide.forEach(function(b){d(n).forEach(function(a){if(a.getAttribute("data-id")===b||a.getAttribute("data-name")===b)a.style.display="none"})});var k=b.fill.basicColor;"string"===typeof k&&f.setAttr(g,{fill:k,"data-fill":k});if("object"===f.type(k)&&!f.isEmptyObject(k)){f.setAttr(g,{fill:t.fill.basicColor,"data-fill":t.fill.basicColor});for(var x in k){var r=k[x];f.setAttr(d(".jsmap-"+x,l),{fill:r,"data-fill":r})}}var y=window.setTimeout(function(){d(g).forEach(function(b){b.style.transition=".15s"});window.clearTimeout(y)},0);f.setAttr(g,{stroke:b.stroke.color,"stroke-width":b.stroke.width});f.setAttr(q,{fill:b.areaName.basicColor,"font-size":b.areaName.size});k=b.disabled.name;if(Array.isArray(k)&&k.length){var F=function(a){d(a).forEach(function(a){a.classList.add("jsmap-disabled");a.style.cursor="not-allowed";"text"!==a.nodeName.toLowerCase()&&a.setAttribute("fill",b.disabled.color)})};if(b.disabled.except){var B=[];k.forEach(function(b){b.match(/[a-z]/)?B.push(b):d(g).forEach(function(a){a.getAttribute("data-name")===b&&B.push(a.getAttribute("data-id"))})});var C=v.map(function(b){return b});B.forEach(function(b){C.splice(C.indexOf(b),1)});C.forEach(function(b){F(d(".jsmap-"+b,a))})}else k.forEach(function(b){F(d(".jsmap-"+b,a))})}b.tip&&!d("#jsmap-tip-layer")[0]&&(document.body.insertAdjacentHTML("beforeend",'\x3cdiv \r\n\t\t\t\t\t\t\tid\x3d"jsmap-tip-layer" \r\n\t\t\t\t\t\t\tstyle\x3d"\r\n\t\t\t\t\t\t\t\tposition:absolute;\r\n\t\t\t\t\t\t\t\ttop:0;\r\n\t\t\t\t\t\t\t\tleft:0;\r\n\t\t\t\t\t\t\t\tz-index:999;\r\n\t\t\t\t\t\t\t\tdisplay:inline-block;\r\n\t\t\t\t\t\t\t\twidth:auto;\r\n\t\t\t\t\t\t\t\theight:auto;\r\n\t\t\t\t\t\t\t\toverflow:hidden;\r\n\t\t\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t\t\t\t"\r\n\t\t\t\t\t\t\x3e\x3c/div\x3e'),u=d("#jsmap-tip-layer")[0]);v.forEach(function(c){d(".jsmap-"+c,a).forEach(function(c){c.addEventListener("mouseenter",function(){if(!E&&b.defaultInteractive){var a=this;if(!a.classList.contains("jsmap-disabled")){if(!a.classList.contains("jsmap-clicked")){var c=v.map(function(b){return b});"string"===f.type(b.fill.hoverColor)&&"path"===a.nodeName.toLowerCase()&&a.setAttribute("fill",b.fill.hoverColor);if("object"===f.type(b.fill.hoverColor)&&!f.isEmptyObject(b.fill.hoverColor)){for(var e in b.fill.hoverColor){var w=b.fill.hoverColor[e];-1<a.getAttribute("class").indexOf("jsmap-"+e)&&a.setAttribute("fill",w);c.splice(c.indexOf(e),1)}c.forEach(function(b){-1<a.getAttribute("class").indexOf("jsmap-"+b)&&a.setAttribute("fill",t.fill.hoverColor)})}}b.hoverCallback(a.getAttribute("data-id"),a.getAttribute("data-name"));b.tip&&(!0===b.tip&&(u.innerHTML='\x3cdiv \r\n\t\t\t\t\t\t\t\t\t\tstyle\x3d"\r\n\t\t\t\t\t\t\t\t\t\t\tpadding:10px 12px;\r\n\t\t\t\t\t\t\t\t\t\t\tcolor:#fff;\r\n\t\t\t\t\t\t\t\t\t\t\tfont-size:14px;\r\n\t\t\t\t\t\t\t\t\t\t\ttext-align:center;\r\n\t\t\t\t\t\t\t\t\t\t\tborder-radius:4px;\r\n\t\t\t\t\t\t\t\t\t\t\tborder:#777 solid 1px;\r\n\t\t\t\t\t\t\t\t\t\t\tbackground:rgba(0,0,0,.75);"\r\n\t\t\t\t\t\t\t\t\t\x3e'+a.getAttribute("data-name")+"\x3c/div\x3e"),"function"===f.type(b.tip)&&(u.innerHTML=b.tip(a.getAttribute("data-id"),a.getAttribute("data-name"))),document.onmousemove=function(b){f.setCSS(u,{transform:"translate3d("+(b.pageX+12+"px")+", "+(b.pageY+12+"px")+", 0)",display:"block"})})}}});c.addEventListener("mouseleave",function(){E||!b.defaultInteractive||this.classList.contains("jsmap-disabled")||(this.classList.contains("jsmap-clicked")||"path"===this.nodeName.toLowerCase()&&this.setAttribute("fill",this.getAttribute("data-fill")),b.tip&&(u.innerHTML="",f.setCSS(u,{transform:"translate3d(0, 0, 0)",display:"none"}),document.onmousemove=null))});c.addEventListener("click",function(){var c=this;if(!c.classList.contains("jsmap-disabled")&&b.defaultInteractive){var e=c.getAttribute("data-id");if(!1!==b.fill.clickColor){var w=v.map(function(b){return b});"string"===typeof b.fill.clickColor&&"path"===c.nodeName.toLowerCase()&&c.setAttribute("fill",b.fill.clickColor);if("object"===f.type(b.fill.clickColor)&&!f.isEmptyObject(b.fill.clickColor)){for(var p in b.fill.clickColor){var g=b.fill.clickColor[p];-1<c.getAttribute("class").indexOf("jsmap-"+p)&&c.setAttribute("fill",g);w.splice(w.indexOf(p),1)}w.forEach(function(b){-1<c.getAttribute("class").indexOf("jsmap-"+b)&&c.setAttribute("fill",t.fill.clickColor)})}if(!1!==b.areaName.clickColor&&b.areaName.show){var h=d("text.jsmap-"+c.getAttribute("data-id"),a)[0];h.setAttribute("fill",b.areaName.clickColor);b.multiple||d(d("text",a)).forEach(function(a){a!==h&&a.setAttribute("fill",b.areaName.basicColor)})}b.multiple?(c.classList[a.outerSelected?"add":"toggle"]("jsmap-clicked"),c.classList.contains("jsmap-clicked")||c.setAttribute("fill",c.getAttribute("data-fill"))):(c.classList.add("jsmap-clicked"),d(n).forEach(function(b){b.classList.contains("jsmap-"+e)||b.classList.contains("jsmap-disabled")||(b.classList.remove("jsmap-clicked"),"text"!==b.nodeName.toLowerCase()&&b.setAttribute("fill",b.getAttribute("data-fill")))}));a.outerSelected||a.autoSelected||b.clickCallback(c.getAttribute("data-id"),c.getAttribute("data-name"))}}})})});Array.isArray(b.selected)&&b.selected.length&&(a.autoSelected=!0,b.selected.forEach(function(b){b=d('path[data-id\x3d"'+b+'"], path[data-name\x3d"'+b+'"]',l)[0];var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0);b&&b.dispatchEvent(a)}),a.autoSelected=null);if(!1===b.zoom.disabled){var I=function(b){var a=b.pageX-G;b=b.pageY-H;if(1<m){var c=(z*m-z)/2,e=(A*m-A)/2;a>c&&(a=c);b>e&&(b=e);a<-c&&(a=-c);b<-e&&(b=-e);f.setCSS(h,{marginLeft:a+"px",marginTop:b+"px",transition:"0s",cursor:"move"});f.setCSS(l,{pointerEvents:"none"})}},D=function(a,c){a.preventDefault&&a.preventDefault();a=c||a.deltaY;0>a&&m<parseFloat(b.zoom.max)&&(m+=.2);0<a&&1<m&&(m-=.2);m=parseFloat(m.toFixed(1));f.setCSS(h,{transform:"scale("+m+")"});if(1<m){c=parseFloat(f.getCSS(h,"margin-left"));var e=parseFloat(f.getCSS(h,"margin-top")),d=(z*m-z)/2;a=(A*m-A)/2;c>d&&f.setCSS(h,{marginLeft:d+"px"});e>a&&f.setCSS(h,{marginTop:a+"px"});c<-d&&f.setCSS(h,{marginLeft:-d+"px"});e<-a&&f.setCSS(h,{marginTop:-a+"px"})}1===Math.ceil(m)&&f.setCSS(h,{marginTop:0,marginLeft:0})};b.zoom.zoomRange&&a.insertAdjacentHTML("beforeend",'\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"jsmap-zoom-range"\x3e\r\n\t\t\t\t\t\t\t\x3cstyle\x3e.jsmap-zoom-range{position:absolute;right:10px;top:10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.jsmap-zoom-range div{width:20px;height:20px;background:#333;color:#fff;font-size:20px;cursor:pointer;border-radius:4px;text-align:center;line-height:20px;transition:background .2s;}.jsmap-zoom-range div:last-child{margin-top:5px;font-size:16px;}.jsmap-zoom-range div:hover{background:#555;}\x3c/style\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv\x3e+\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv\x3e\u2212\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t');k=d(".jsmap-zoom-range div:first-of-type",a)[0];x=d(".jsmap-zoom-range div:last-of-type",a)[0];var m=1;f.setCSS(a,{overflow:"hidden"});k&&(k.onclick=function(){D({},-1)});x&&(x.onclick=function(){D({},1)});b.zoom.wheelZoom&&a.addEventListener("wheel",D);var z=parseFloat(-1<b.width.indexOf("%")?f.getCSS(h,"width"):b.width),A=parseFloat(e),G,H;h.addEventListener("mousedown",function(b){G=b.pageX-h.offsetLeft;H=b.pageY-h.offsetTop;document.addEventListener("mousemove",I)});document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",I);h.style.removeProperty("cursor");l.style.removeProperty("pointer-events")})}!1===b.marker.disabled&&(q.forEach(function(a){var c=a.getBBox(),e=document.createElementNS("http://www.w3.org/2000/svg","image");f.setAttr(e,{x:parseInt(a.getAttribute("x"))+(parseInt(c.width)-24)/2,y:parseInt(a.getAttribute("y"))-(b.areaName.show?b.areaName.size:0)-22,width:24,height:24,style:"cursor:pointer","data-id":a.getAttribute("data-id"),"data-name":a.getAttribute("data-name")});e.href.baseVal=b.marker.icon;l.appendChild(e);d("image",l).forEach(function(b){var a=b.getAttribute("data-id");d('path[data-id\x3d"'+a+'"]',l)[0].classList.contains("jsmap-disabled")&&(b.setAttribute("style","cursor:not-allowed"),b.classList.add("jsmap-disabled"))})}),l.addEventListener("click",function(a){a=a.target;a.nodeName.match(/(image|text)/)&&!a.classList.contains("jsmap-disabled")&&"function"===f.type(b.marker.click)&&b.marker.click(a.getAttribute("data-id"),a.getAttribute("data-name"))}));b.areaName.show||q.forEach(function(b){l.removeChild(b)})})}else console.warn("\u6765\u81ea jsMap \u7684\u63d0\u793a\uff1a[ \u5f88\u62b1\u6b49\uff0c\u6682\u65e0\u5357\u6d77\u8bf8\u5c9b\u7684\u8be6\u7ec6\u5730\u56fe\u6570\u636e\u3002 ]");else console.warn("\u6765\u81ea jsMap \u7684\u63d0\u793a\uff1a[ \u5f88\u62b1\u6b49\uff0c\u6682\u65e0\u53f0\u6e7e\u7701\u7684\u8be6\u7ec6\u5730\u56fe\u6570\u636e\u3002 ]");else console.warn("\u6765\u81ea jsMap \u7684\u63d0\u793a\uff1a[ \u8bf7\u4f20\u5165\u5730\u56fe\u6570\u636e ]")},refresh:function(a){d(a).forEach(function(a){var c=a.__jsmap_jsondata__,b=a.__jsmap_options__;c&&b&&y.config(a,c,b)})},remove:function(a){d(a).forEach(function(a){var c=a.__jsmap_csscache__;if(c)for(var b in c){var d=c[b];d?a.style[b]=d:a.style.removeProperty(b)}a.classList.remove("jsmap-container");a.__jsmap_csscache__=null;a.__jsmap_jsondata__=null;a.__jsmap_options__=null;a.innerHTML=""})},triggerClick:function(a,c){d(a).forEach(function(a){a=d(c.match(/[a-z]/)?".jsmap-"+c:'path[data-name\x3d"'+c+'"]',a)[0];var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0);a&&a.dispatchEvent(b)})},selected:function(a,c){var e=[];a=d(a);a.forEach(function(b){b.outerSelected=!0;Array.isArray(c)&&c.forEach(function(a){e.push(d(a.match(/[a-z]/)?".jsmap-"+a:'path[data-name\x3d"'+a+'"]',b)[0])});"string"===typeof c&&e.push(d(c.match(/[a-z]/)?".jsmap-"+c:'path[data-name\x3d"'+c+'"]',b)[0])});e.forEach(function(a){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0);a&&a.dispatchEvent(b)});a.forEach(function(a){a.outerSelected=null})},getSelected:function(a,c){a=d(".jsmap-svg-container",d(a)[0])[0];a=d(".jsmap-clicked",a);c||(c={type:"array"});if(c){if("array"===c.type){var e=[],b=[];if(!a.length)return[[],[]];d(a).forEach(function(a){e.push(a.getAttribute("data-id"));b.push(a.getAttribute("data-name"))});return[e,b]}if("object"===c.type){var f={};if(!a.length)return f;d(a).forEach(function(a){f[a.getAttribute("data-id")]=a.getAttribute("data-name")});return f}}},getJSON:function(a,c){a&&g(a,function(a){"function"===f.type(c)&&c(a)})},preloadJSON:function(a,c){if("object"===f.type(a)&&!f.isEmptyObject(a)){var e=Object.keys(a).length,b=0,d;for(d in a)(function(a,d){g(d,function(d){r[a]=d;b++;b===e&&"function"===f.type(c)&&c(r)})})(d,a[d])}},getPreloadJSON:function(a){return a?r[a]:r}};!function c(d){Object.freeze(d);Object.keys(d).forEach(function(b){"object"===typeof d[b]&&c(d[b])})}(y);return y});